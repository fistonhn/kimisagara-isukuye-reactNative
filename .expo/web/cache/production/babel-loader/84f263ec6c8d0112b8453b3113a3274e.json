{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Spinner from'react-native-loading-spinner-overlay';import{Text}from'react-native-paper';import Logo1 from\"../../components/Logo/Logo1\";import Logo2 from\"../../components/Logo/Logo2\";import Button from\"../../components/Button/Button\";import TextInput from\"../../components/TextInput/TextInput\";import{emailValidator}from\"../../helpers/emailValidator\";import{passwordValidator}from\"../../helpers/passwordValidator\";import{nameValidator}from\"../../helpers/nameValidator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RegisterScreen(_ref){var navigation=_ref.navigation;var _useState=useState({value:'',error:''}),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState({value:'',error:''}),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState({value:'',error:''}),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),successMessage=_useState8[0],setSuccessMessage=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];useEffect(function(){var timer=setTimeout(function(){setSuccessMessage(null);setErrorMessage(null);},4000);return function(){return clearTimeout(timer);};});var onSignUpPressed=function(){var _ref2=_asyncToGenerator(function*(){var nameError=nameValidator(name.value);var emailError=emailValidator(email.value);var passwordError=passwordValidator(password.value);if(emailError||passwordError||nameError){setName(_objectSpread(_objectSpread({},name),{},{error:nameError}));setEmail(_objectSpread(_objectSpread({},email),{},{error:emailError}));setPassword(_objectSpread(_objectSpread({},password),{},{error:passwordError}));return;}try{setLoading(true);var newData=JSON.stringify({names:name.value,number:email.value,password:password.value});yield fetch('https://kimisagara-isukuye.vercel.app/api/signup',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:newData}).then(function(response){return response.json();}).then(function(responseData){if(responseData.status===200){setLoading(false);setSuccessMessage(responseData.message);setTimeout(function(){navigation.replace('Login');},4000);}else{setLoading(false);setErrorMessage(responseData.error);}});}catch(error){setLoading(false);setErrorMessage(error.error);}});return function onSignUpPressed(){return _ref2.apply(this,arguments);};}();return _jsx(View,{children:_jsxs(View,{style:{margin:30},children:[_jsx(Spinner,{visible:loading,textContent:'Tegereza...',textStyle:{color:'#FFF'}}),_jsxs(View,{style:{flexShrink:1,flexDirection:'row',justifyContent:'center',alignItems:'center'},children:[_jsx(View,{style:{marginRight:30},children:_jsx(Logo1,{})}),_jsx(View,{style:{marginLeft:30},children:_jsx(Logo2,{})})]}),_jsxs(View,{style:{fontSize:30,justifyContent:'center',alignItems:'center'},children:[_jsx(Text,{style:{fontSize:25},children:\"Iyandikishe\"}),successMessage&&_jsx(Text,{style:{fontSize:17,backgroundColor:'#4BB543',color:'white',padding:5},children:successMessage}),errorMessage&&_jsx(Text,{style:{fontSize:20,backgroundColor:'red',color:'white',padding:5},children:errorMessage})]}),_jsx(TextInput,{label:\"Andika hano Amazina yawe\",returnKeyType:\"next\",value:name.value,onChangeText:function onChangeText(text){return setName({value:text,error:''});},error:!!name.error,errorText:name.error}),_jsx(TextInput,{label:\"Andika hano numero ya telefone\",returnKeyType:\"next\",value:email.value,onChangeText:function onChangeText(text){return setEmail({value:text,error:''});},error:!!email.error,errorText:email.error,autoCapitalize:\"none\",autoCompleteType:\"email\",textContentType:\"emailAddress\",keyboardType:\"number-pad\"}),_jsx(TextInput,{label:\"Andika hano umubare wibanga\",returnKeyType:\"done\",value:password.value,onChangeText:function onChangeText(text){return setPassword({value:text,error:''});},error:!!password.error,errorText:password.error,secureTextEntry:true}),_jsx(Button,{mode:\"contained\",onPress:onSignUpPressed,style:{marginTop:24},children:\"Iyandikishe\"}),_jsxs(View,{style:styles.row,children:[_jsx(Text,{children:\"Usanzwe wariyandikishije? \"}),_jsx(TouchableOpacity,{onPress:function onPress(){return navigation.replace('Login');},children:_jsx(Text,{style:styles.link,children:\"Kanda hano winjire\"})})]})]})});}var styles=StyleSheet.create({row:{flexDirection:'row',marginTop:4},link:{fontWeight:'bold',color:'#00A1DE'}});","map":{"version":3,"names":["React","useState","useEffect","Spinner","Text","Logo1","Logo2","Button","TextInput","emailValidator","passwordValidator","nameValidator","RegisterScreen","navigation","value","error","name","setName","email","setEmail","password","setPassword","successMessage","setSuccessMessage","errorMessage","setErrorMessage","loading","setLoading","timer","setTimeout","clearTimeout","onSignUpPressed","nameError","emailError","passwordError","newData","JSON","stringify","names","number","fetch","method","headers","body","then","response","json","responseData","status","message","replace","margin","color","flexShrink","flexDirection","justifyContent","alignItems","marginRight","marginLeft","fontSize","backgroundColor","padding","text","marginTop","styles","row","link","StyleSheet","create","fontWeight"],"sources":["F:/kimisagara/official/recipes-app-react-native/src/screens/Signup/Signup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { View, StyleSheet, TouchableOpacity } from 'react-native'\r\nimport Spinner from 'react-native-loading-spinner-overlay';\r\nimport { Text } from 'react-native-paper'\r\nimport Logo1 from '../../components/Logo/Logo1'\r\nimport Logo2 from '../../components/Logo/Logo2'\r\n\r\nimport Button from '../../components/Button/Button'\r\nimport TextInput from '../../components/TextInput/TextInput'\r\nimport { emailValidator } from '../../helpers/emailValidator'\r\nimport { passwordValidator } from '../../helpers/passwordValidator'\r\nimport { nameValidator } from '../../helpers/nameValidator'\r\n\r\nexport default function RegisterScreen({ navigation }) {\r\n  const [name, setName] = useState({ value: '', error: '' })\r\n  const [email, setEmail] = useState({ value: '', error: '' })\r\n  const [password, setPassword] = useState({ value: '', error: '' })\r\n\r\n  const [successMessage, setSuccessMessage] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setSuccessMessage(null)\r\n      setErrorMessage(null)\r\n    }, 4000)\r\n    return () => clearTimeout(timer)\r\n  })\r\n\r\n\r\n  const onSignUpPressed = async () => {\r\n\r\n    const nameError = nameValidator(name.value)\r\n    const emailError = emailValidator(email.value)\r\n    const passwordError = passwordValidator(password.value)\r\n    if (emailError || passwordError || nameError) {\r\n      setName({ ...name, error: nameError })\r\n      setEmail({ ...email, error: emailError })\r\n      setPassword({ ...password, error: passwordError })\r\n      return\r\n    }\r\n    try {\r\n      setLoading(true);\r\n\r\n      const newData = JSON.stringify({\r\n          names: name.value,\r\n          number: email.value,\r\n          password: password.value,\r\n      })\r\n\r\n      await fetch('https://kimisagara-isukuye.vercel.app/api/signup', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: newData\r\n    }).then((response) => response.json())\r\n      .then((responseData) => {\r\n        if(responseData.status === 200) {\r\n          setLoading(false);\r\n          setSuccessMessage(responseData.message)\r\n\r\n          setTimeout(() => { navigation.replace('Login') }, 4000)\r\n        } else {\r\n          setLoading(false);\r\n          setErrorMessage(responseData.error)\r\n        }\r\n      })\r\n\r\n  } catch (error) { \r\n    setLoading(false);\r\n    setErrorMessage(error.error) \r\n  }\r\n\r\n  }\r\n\r\n  return (\r\n    <View>\r\n    <View style={{ margin: 30}}>\r\n        <Spinner\r\n          visible={loading}\r\n          textContent={'Tegereza...'}\r\n          textStyle={{color: '#FFF'}}\r\n        />\r\n      <View style={{ flexShrink: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }} > \r\n        <View style={{ marginRight: 30}}><Logo1 /></View>\r\n        <View style={{ marginLeft: 30}}><Logo2 /></View>\r\n      </View>\r\n      <View style={{ fontSize: 30, justifyContent: 'center', alignItems: 'center'}}>\r\n        <Text style={{ fontSize: 25 }}>Iyandikishe</Text>\r\n\r\n        {successMessage && (<Text style={{ fontSize: 17, backgroundColor: '#4BB543', color: 'white', padding: 5 }}>{successMessage}</Text>)}\r\n        {errorMessage &&(<Text style={{ fontSize: 20, backgroundColor: 'red', color: 'white', padding: 5 }}>{errorMessage}</Text>)}\r\n\r\n\r\n      </View>\r\n      <TextInput\r\n        label=\"Andika hano Amazina yawe\"\r\n        returnKeyType=\"next\"\r\n        value={name.value}\r\n        onChangeText={(text) => setName({ value: text, error: '' })}\r\n        error={!!name.error}\r\n        errorText={name.error}\r\n      />\r\n      <TextInput\r\n        label=\"Andika hano numero ya telefone\"\r\n        returnKeyType=\"next\"\r\n        value={email.value}\r\n        onChangeText={(text) => setEmail({ value: text, error: '' })}\r\n        error={!!email.error}\r\n        errorText={email.error}\r\n        autoCapitalize=\"none\"\r\n        autoCompleteType=\"email\"\r\n        textContentType=\"emailAddress\"\r\n        keyboardType = \"number-pad\"\r\n      />\r\n      <TextInput\r\n        label=\"Andika hano umubare wibanga\"\r\n        returnKeyType=\"done\"\r\n        value={password.value}\r\n        onChangeText={(text) => setPassword({ value: text, error: '' })}\r\n        error={!!password.error}\r\n        errorText={password.error}\r\n        secureTextEntry\r\n      />\r\n      <Button\r\n        mode=\"contained\"\r\n        onPress={onSignUpPressed}\r\n        style={{ marginTop: 24 }}\r\n      >\r\n        Iyandikishe\r\n      </Button>\r\n      <View style={styles.row}>\r\n        <Text>Usanzwe wariyandikishije? </Text>\r\n        <TouchableOpacity onPress={() => navigation.replace('Login')}>\r\n          <Text style={styles.link}>Kanda hano winjire</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  row: {\r\n    flexDirection: 'row',\r\n    marginTop: 4,\r\n  },\r\n  link: {\r\n    fontWeight: 'bold',\r\n    color: '#00A1DE',\r\n  },\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}